
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="The &lt;database&gt; element in file database-config.xml contains, at most, a single occurrence of subelement &lt;dbcp-connection-pool&gt; . The use of the &lt;dbcp-connection-pool&gt; element is optional. If using ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="reference" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="r_hu1589099" /><meta name="DC.language" content="en-US" /><title>The &lt;dbcp-connection-pool&gt; database configuration element</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="r_hu1589099" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="r_hu1589099__hu1589099">

<h1 class="title topictitle1" id="r_hu1589099__hu1589099">The <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code> database configuration
        element</h1>
<div class="body refbody">
<section class="section">
<p class="p">The <code class="ph codeph">&lt;database&gt;</code> element in file <span class="ph filepath">database-config.xml</span> contains, at most, a single occurrence of subelement <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code>. The use of the <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code> element is optional. If using <span class="keyword">GenericCenter</span> to manage the connection pool rather than a JNDI data source managed by the application server, you must use this element to configure the connection pool behavior.</p>
<div class="note note note_note"><span class="note__title">Note:</span> Guidewire implements its own version of the Apache Commons Pool, overriding specific values to provide improved functionality.</div>
<p class="p">If you experience slow performance, it is possible that the <span class="keyword">GenericCenter</span> server is not allocating enough database connections. If all database connections are in use, any client attempting to connect to the server must wait until a connection is free. By default, <span class="keyword">GenericCenter</span> periodically tests connections in the connection pool using a simple query and evicts idle connections and those that fail with an exception. </p>
<p class="p">The <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code> element has the following syntax. The following code sample shows required attributes in bold font. </p>
<pre class="pre codeblock"><code>&lt;database&gt;

   &lt;!-- Sets options for the connection pool that Guidewire provides --&gt;
  &lt;dbcp-connection-pool <strong class="ph b">jdbc-url</strong>="<var class="keyword varname">string</var>" max-idle="<var class="keyword varname">integer</var>" max-total="<var class="keyword varname">integer</var>" max-wait="<var class="keyword varname">integer</var>"
        min-evictable-idle-time="<var class="keyword varname">integer</var>" num-tests-per-eviction-run="<var class="keyword varname">integer</var>" password-file="<var class="keyword varname">string</var>"
        test-on-borrow="<var class="keyword varname">true</var>|<var class="keyword varname">false</var>" test-on-return="<var class="keyword varname">true</var>|<var class="keyword varname">false</var>" test-while-idle="<var class="keyword varname">true</var>|<var class="keyword varname">false</var>" 
        time-between-eviction-runs="<var class="keyword varname">integer</var>" when-exhausted-action="<var class="keyword varname">block</var>|<var class="keyword varname">fail</var>|<var class="keyword varname">grow</var>"&gt;
    &lt;reset-tools-params collation="<var class="keyword varname">string</var>" oracle-tnsnames="<var class="keyword varname">string</var>" system-password="<var class="keyword varname">string</var>"
          system-username="<var class="keyword varname">string</var>"/&gt;
  &lt;/dbcp-connection-pool&gt;

 &lt;/database&gt;</code></pre>
<p class="p">The following list describes the attributes that you can configure on the <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code> element. 
</p><div class="note note note_note"><span class="note__title">Note:</span> These attributes apply only if you use the default connection pool. If you use the server connection 
pool, these settings do not apply. Configure the server connection pool instead through the administration 
console provided with the server. See <a class="xref" href="t_hm2420971.html#t_hm2420971">Configure GenericCenter to use a direct JNDI data source</a> for more information.
</div><table class="table" id="r_hu1589099__hu1600705"><colgroup><col /><col /></colgroup><tbody class="tbody">
<tr>
<td class="entry"><p class="p"><code class="ph codeph">jdbc-url
</code></p></td>
<td class="entry"><p class="p"><dfn class="term">Required</dfn>. Stores connection information for the database. The format of the <code class="ph codeph">jdbc-url</code> 
value changes depending on the database type. See <a class="xref" href="c_hm2419716.html#c_hm2419716">The JDBC URL format</a> for more information.
</p></td>
</tr>
<tr>
<td class="entry" colspan="2"><p class="p"><dfn class="term">The following attributes are all optional.
</dfn></p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">max-idle
</code></p></td>
<td class="entry"><p class="p">Maximum number of connections that can sit idle in the pool at any time. If negative, 
there is no limit to the number of connections that can be idle at any given time. The 
default is -1.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">max-total</code></p></td>
        <td class="entry"><p class="p">Maximum number of connections that the connection pool can allocate, including those in use by a
                client or that are in an idle state awaiting use. A reasonable
                initial value for this is about 25% of the number of users that
                you expect to use <span class="keyword">GenericCenter</span> at
                the same time.</p>
                <p class="p">If you increase the number of workers for a work queue for a
                        batch process, then you also need to increase the possible
                        number of database connections by setting max-total to a larger
                        number.</p>
                <p class="p">If you set <code class="ph codeph">max-total</code> to a negative number, there
                        is no limit to the number of allowed database connections. The
                        attribute default is -1.</p>
                <p class="p">If you configure <code class="ph codeph">max-total</code> for an insufficient
                        number of connections, and, you set <code class="ph codeph">max-wait</code> to
                        a negative number (no timeout), it has the possibility to cause
                        the application server to deadlock.</p><p class="p">If the number of database connections reaches the value of <code class="ph codeph">max-total</code>, <span class="keyword">GenericCenter</span> considers the connection
                                pool to have no more available connections.</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">max-wait</code></p></td>
        <td class="entry"><p class="p">Maximum amount of time, in milliseconds, that the data source waits for a connection before one
                becomes available in the pool to service. The default is
                30000.</p>
                <p class="p">Guidewire recommends that you do not set the value of this
                        attribute to a negative number (infinite wait time). If it is
                        not possible to deliver a connection in a reasonable amount of
                        time, you want the connection request to time out and to issue
                        an error.</p><p class="p">The value of the <code class="ph codeph">max-wait</code> attribute interacts with the <code class="ph codeph">when-exhausted-action</code> attribute. 
                                See that attribute for more information.
                        </p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">min-evictable-idle-time
</code></p></td>
<td class="entry"><p class="p">Maximum time, in milliseconds, that a connection can sit idle in the pool before it is 
eligible for eviction due to idle time. If a connection is idle more the specified number of 
milliseconds, <span class="keyword">GenericCenter</span> evicts the connection from the pool. The default is 300000 
milliseconds.
</p><p class="p">If this value is a non-positive integer, <span class="keyword">GenericCenter</span> does not drop connections from the 
pool due to idle time alone. This setting has no effect unless the value of 
<code class="ph codeph">time-between-eviction-runs</code> is greater than 0. 
</p><p class="p">During an eviction run, <span class="keyword">GenericCenter</span> scans the connection pool and tests the number of 
idle connections equal to the value of <code class="ph codeph">num-tests-per-eviction-run</code>. 
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">num-tests-per-eviction-run
</code></p></td>
<td class="entry"><p class="p">Number of idle connections that <span class="keyword">GenericCenter</span> tests in each eviction run. This setting 
has no effect unless the value of <code class="ph codeph">time-between-eviction-runs</code> is greater than <code class="ph codeph">0</code>. The 
default is 3.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">password-file
</code></p></td>
<td class="entry"><p class="p">Use to hide the value of the database connection password in the <code class="ph codeph">jdbc-url</code> connection 
string. Instead of providing the password in the connection string, you can place the 
password in an external file and reference this file from file <span class="ph filepath">database-config.xml</span>. See 
<a class="xref" href="r_hm2419784.html#r_hm2419784">Obfuscating the database password</a> for more 
information.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">test-on-borrow
</code></p></td>
<td class="entry"><p class="p"><dfn class="term">Boolean</dfn>. Whether <span class="keyword">GenericCenter</span> tests a connection by running a simple validation query 
as <span class="keyword">GenericCenter</span> first borrows the connection from the connection pool. If set to <code class="ph codeph">true</code>, 
the connection pool attempts to validate each connection before <span class="keyword">GenericCenter</span> uses the 
connection from the connection pool. If a connection fails validation, the connection pool 
drops the connection and chooses a different connection to borrow. The default is <code class="ph codeph">false</code>.
</p><p class="p"><span class="keyword">GenericCenter</span> returns any connection used only for a query to the pool immediately after 
the query completes. Thus, running a test query every time that a connection returns to 
the pool can potentially affect performance.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">test-on-return
</code></p></td>
<td class="entry"><p class="p"><dfn class="term">Boolean</dfn>. Whether <span class="keyword">GenericCenter</span> tests a connection by running a simple validation query 
as <span class="keyword">GenericCenter</span> returns the connection to the connection pool. If set to <code class="ph codeph">true</code>, the 
connection pool attempts to validate each connection that <span class="keyword">GenericCenter</span> returns from the 
database. The default is <code class="ph codeph">false</code>.
</p><p class="p"><span class="keyword">GenericCenter</span> returns any connection used only for a query to the pool immediately after 
the query completes. Thus, running a test query every time that a connection returns to 
the pool can potentially affect performance.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">test-while-idle
</code></p></td>
<td class="entry"><p class="p"><dfn class="term">Boolean</dfn>. Whether <span class="keyword">GenericCenter</span> performs validation on idle connections in the 
connection pool. If set to <code class="ph codeph">true</code>, the connection pool performs validation on idle 
connections. It drops connections that fail the validation test. The default is <code class="ph codeph">true</code>.
</p><p class="p">This attribute value has no effect unless the value of <code class="ph codeph">time-between-eviction-runs</code> is 
greater than zero.
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">time-between-eviction-runs
</code></p></td>
<td class="entry"><p class="p">Time, in milliseconds, that <span class="keyword">GenericCenter</span> waits between eviction runs of idle connections 
in the connection pool. The default is 60000.
</p><p class="p">If set to a a non-positive integer, <span class="keyword">GenericCenter</span> does not launch any eviction threads. 
</p></td>
</tr>
<tr>
<td class="entry"><p class="p"><code class="ph codeph">when-exhausted-action
</code></p></td>
<td class="entry"><p class="p">Specifies the behavior of the connection pool if the pool has no more connections. Set 
this attribute to one of the following values:
</p><ul class="ul">
<li class="li"><code class="ph codeph">fail</code> – If the there are no more connections available, <span class="keyword">GenericCenter</span> throws a 
<code class="ph codeph">NoSuchElementException</code> exception.
</li><li class="li"><code class="ph codeph">grow</code> – If there are no more connections available, <span class="keyword">GenericCenter</span> creates a new 
connection and returns it, essentially making <code class="ph codeph">max-active</code> meaningless.
</li><li class="li"><code class="ph codeph">block</code> – If there are no more connections available, <span class="keyword">GenericCenter</span> blocks connections 
until a new or idle connection becomes available. If the value of <code class="ph codeph">max-wait</code> is positive, 
then <span class="keyword">GenericCenter</span> blocks, at most, for that number of milliseconds, after which 
<span class="keyword">GenericCenter</span> throws a <code class="ph codeph">NoSuchElementException</code> exception. If the value of <code class="ph codeph">max-wait</code> 
is non-positive, <span class="keyword">GenericCenter</span> blocks indefinitely.
</li></ul>

<p class="p">The default is <code class="ph codeph">block</code>.
</p></td>
</tr>
</tbody></table>

<p class="p">The <code class="ph codeph">&lt;dbcp-connection-pool&gt;</code> element has the following subelement.
</p><table class="table" id="r_hu1589099__hu1594812"><colgroup><col /><col /></colgroup><tbody class="tbody">
<tr>
<td class="entry"><p class="p"><code class="ph codeph">reset-tools-params
</code></p></td>
<td class="entry"><p class="p">See <a class="xref" href="r_hu1589989.html#r_hu1589989">The &lt;reset-tool-params&gt; database configuration element</a> for more information.
</p></td>
</tr>
</tbody></table>

<p class="p seealso">See also
</p><ul class="ul">
<li seealso-li="yes" class="li"><a class="xref" href="r_hu1667728.html#r_hu1667728">The database configuration file</a>
</li><li seealso-li="yes" class="li"><a class="xref" href="r_gc2686764.html#r_gc2686764">The Database Parameters screen</a>
</li></ul>

</section>
</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 20, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>