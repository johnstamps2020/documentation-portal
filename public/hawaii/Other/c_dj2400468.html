
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="To customize how PolicyCenter handles renewals, implement IPolicyRenewalPlugin . For example, this plugin determines when to start a Renewal job for a PolicyPeriod . However, note that this plugin ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="concept" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="c_dj2400468" /><meta name="DC.language" content="en-US" /><title>Renewal plugin</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="c_dj2400468" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="c_dj2400468__dj2400468">

<h1 class="title topictitle1" id="c_dj2400468__dj2400468">Renewal plugin</h1>
<div class="body conbody">
<p class="p">To customize how PolicyCenter handles renewals,
implement <code class="ph codeph">IPolicyRenewalPlugin</code>.
For example, this plugin determines when to start a <code class="ph codeph">Renewal</code> job for a <code class="ph codeph">PolicyPeriod</code>. However, note that
this plugin does not actually create the <code class="ph codeph">Renewal</code> job itself. Instead, the
work queue called <code class="ph codeph">PolicyRenewalStart</code>
actually starts the renewal job. A work queue is like a built-in batch
process except that it automatically parallelizes the work across a <span class="keyword">GenericCenter</span> cluster. The renewal
work queue looks for policy renewals to start.</p>
<p class="p">The most important method in the <code class="ph codeph">IPolicyRenewalPlugin</code> plugin interface
is the <span class="keyword apiname">shouldStartRenewal</span>
method. It determines whether to start the renewal job, as previously
mentioned. Its only argument is a policy period and returns <code class="ph codeph">true</code> if and only if the policy
period is ready for a new renewal.</p>
<p class="p">The built-in implementation evaluates
the date that the renewal normally starts. To do this it calls another
method on the plugin called <code class="ph codeph">getRenewalStartDate</code>.
If you write your own version of this plugin, refer to the built-in implementation
and copy the code from the <span class="keyword apiname">getRenewalStartDate</span>
method if appropriate.</p>
<p class="p">If you write your own version of this
plugin, refer to the built-in implementation class <span class="keyword apiname">gw.plugin.job.impl.PolicyRenewalPlugin</span>.
Copy the <span class="keyword apiname">getRenewalStartDate</span>
method as appropriate.</p>
<p class="p">The plugin implemented in the base configuration
performs the following operations.</p>
<ul class="ul">
<li class="li">If there are open conflicting
jobs on the policy, it prevents renewal until the user handles these
issues.</li>
<li class="li">If there are no conflicting
jobs, this method returns <code class="ph codeph">true</code>
if <code class="ph codeph">getRenewalStartDate()</code>
returns a date in the past.</li>
<li class="li">If there are conflicting
jobs, this method returns <code class="ph codeph">true</code>
if <code class="ph codeph">getRenewalStartDate()</code>
returns a date less than three days in the past.</li>
<li class="li">All other cases return
<code class="ph codeph">false</code>.</li>
</ul>

        <section class="section"><h2 class="title sectiontitle">Get renewal start date</h2>
            
            <p class="p">The other method you must implement in this plugin is the
                    <span class="keyword apiname">getRenewalStartDate</span> method. This method must determine the
                date on or after which to start a renewal job for a given
                    <code class="ph codeph">PolicyPeriod</code>. In contrast to the
                    <span class="keyword apiname">shouldStartRenewal</span> method, the
                    <span class="keyword apiname">getRenewalStartDate</span> method is primarily used for display
                purposes. It is also useful for testing purposes. Within this plugin, only the
                    <span class="keyword apiname">shouldStartRenewal</span> method determines authoritatively whether
                the policy is ready for renewal.</p>
            <p class="p">The built-in implementation evaluates the given <code class="ph codeph">PolicyPeriod</code> to
                determine the earliest date that PolicyCenter creates a renewal job for this policy
                period. This implementation gets a notification date for the
                    <code class="ph codeph">PolicyPeriod</code> from the currently-registered implementation of
                the <code class="ph codeph">INotificationPlugin</code>. The built-in implementation then adds
                further lead time based on the product and period end date of the policy period. It
                always truncates the date to midnight on that date. In other words it removes the
                time-of-day part of that date. This happens because it forces any programmatic date
                comparison of the date that this plugin returns to always be a day (not time)
                comparison.</p>
            <div class="note note note_note"><span class="note__title">Note:</span> 
                <p class="p">Changing the implementation of <span class="keyword apiname">getRenewalStartDate</span> does not
                    reset the field <span class="keyword apiname">PolicyTerm.NextRenewalCheckDate</span> of existing
                    policy terms. Therefore, run the Clear Policy Renewal Check Dates batch process
                    if you modify the implementation of this method.</p>
            </div>
        </section>
        <section class="section"><h2 class="title sectiontitle">Get automated renewal user</h2>
            
            <p class="p">Your plugin must be able to get the PolicyCenter user to associate the renewal policy
                period. Implement the <span class="keyword apiname">getAutomatedRenewalUser</span> method, which takes
                a <code class="ph codeph">PolicyPeriod</code> and returns a <code class="ph codeph">User</code>.</p>
            <p class="p">The built-in behavior finds and returns the PolicyCenter user with the credential
                    <code class="ph codeph">renewal_daemon</code>.</p>
        </section>
        <section class="section"><h2 class="title sectiontitle">Determine whether to use renewal offers</h2>
            
            <p class="p">Your plugin must be able to determine whether this is the kind of policy period
                appropriate for the PolicyCenter renewal offer flow. The built-in behavior checks if
                the current job type for this policy period is <code class="ph codeph">Renewal</code> and also is
                a business auto product. You can customize this logic for each product to use all
                one flow, or a mix of flows depending on the product or other custom logic.</p>
        </section>
</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">Â© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 21, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>