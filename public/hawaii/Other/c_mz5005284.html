
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="After you move your product model definition to the test or production server, changes to definition, if uploaded to the server, can have adverse effects, such as corrupting existing policies. For ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="concept" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="c_mz5005284" /><meta name="DC.language" content="en-US" /><title>Product model immutable field verification</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="c_mz5005284" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="c_mz5005284__mz5005284">

<h1 class="title topictitle1" id="c_mz5005284__mz5005284">Product model immutable field verification</h1>
<div class="body conbody">
<p class="p">After you move your product model definition to the test or production server, changes to
            definition, if uploaded to the server, can have adverse effects, such as corrupting
            existing policies. For example, consider the effects of removing a coverage pattern
            while there is a bound policy that uses that coverage pattern. PolicyCenter guards
            against many such changes. For example, it will not let you remove a coverage pattern
            from a test or production server. But PolicyCenter cannot guard against all possible
            changes that could have unintended consequences, so you need to think carefully about
            any changes to existing product model patterns.</p>
<p class="p">You can change certain fields on product model patterns without adverse effects. For example, you
            can change fields such as <code class="ph codeph">Name</code>, <code class="ph codeph">Description</code>, or
                <code class="ph codeph">Priority</code>. However, you must guard against changes to fields that
            define the fundamental identity of the product model patterns. Guidewire refers to these
            types of field as being <dfn class="term">immutable</dfn>, meaning that after you set them you must
            never change them. Guidewire also uses the term <dfn class="term">locked field</dfn>
            interchangeably with the term <dfn class="term">immutable field</dfn>. Additionally, PolicyCenter
            will not let you make changes on a test or production server that change the fundamental
            scaffolding of the overall product model. For example, once a coverage term is added to
            a coverage, that coverage term cannot be deleted.</p>
<p class="p">To prevent changes to these fields, PolicyCenter
verifies the set of immutable fields and product model scaffolding when
you start the server. It checks both for missing items—a missing coverage
pattern, for example—and for immutable fields that have been changed.
If verification fails, PolicyCenter adds a message to the server log
and fails to start.</p>
<section class="section"><h2 class="title sectiontitle">Locked entity fields</h2><p class="p">PolicyCenter stores information about immutable fields in the test or production database. During
                server startup, it reads this information and compares it with the product model
                definition files stored, or newly loaded, in its local file system. The locking
                table contains one row for every product model entity. For example, it contains a
                row for each coverage, a row for each policy line, and so forth. A separate table
                stores the locked field name and the locked value. These name-value pairs represent
                a <code class="ph codeph">Name</code> and an <code class="ph codeph">EntityPublicID</code> for a field on the
                referenced entity.</p>
<p class="p">For example:</p>
<pre class="pre codeblock"><code>ProductModelEntityType
    FieldName 1: FieldValue 1
    FieldName 2: FieldValue 2
    ...
    FieldName n: FieldValue n</code></pre>
<p class="p">To illustrate with a more concrete example, some of
the locked fields on this Personal Auto Collision Coverage are:</p>
<pre class="pre codeblock"><code>CoveragePattern
    CodeIdentifier: PersonalAutoCollisionCoverage
    <strong class="ph b">CoverageCategory</strong>: PAPPhysDamGrp
    <strong class="ph b">CoverageSubtype</strong>: PersonalVehicleCov
    <strong class="ph b">OwningEntityType</strong>: PersonalVehicle
    PublicID: 32342123342
    ... </code></pre>
<p class="p">In this coverage, the locked fields are <code class="ph codeph">CoverageCategory</code>, <code class="ph codeph">CoverageSubtype</code>, and <code class="ph codeph">OwningEnityType</code>, which specifies
that this is a vehicle-level coverage. The <code class="ph codeph">CodeIdentifier</code> and <code class="ph codeph">PublicID</code> are locked by the deleted
pattern check. See <a class="xref" href="c_mz4704881.html#c_mz4704881">Deleted pattern checks</a>.</p></section>






<section class="section"><h2 class="title sectiontitle">Locked array elements</h2><p class="p">PolicyCenter also stores any required array elements in the locking table. The table contains a
                row for each array element. Therefore, if the array has multiple elements, the table
                has a row for each element. To illustrate, suppose a particular
                    <span class="keyword apiname">CoverageSymbolGroup</span> entity named <code class="ph codeph">CovSymbGrp</code>
                has an array of coverage symbol entities named <code class="ph codeph">CovSymbs</code> associated
                with it. In this example, <code class="ph codeph">CovSymbs</code> has a field with the name
                    <code class="ph codeph">covsymbgrp</code> that points back to <code class="ph codeph">CovSymbGrp</code>. In
                the production locking table, PolicyCenter stores locking table entries as </p>
<pre class="pre codeblock"><code>CovSymbs, covsymbgrp : CovSymbGrp, ... </code></pre><p class="p">This group of locking table
entries indicates that there must be an entity of type <code class="ph codeph">CovSymbs</code> and that the field <code class="ph codeph">covsymbgrp</code> must have the value
of its parent, <code class="ph codeph">CovSymbGrp</code>.
If <code class="ph codeph">CovSymbs</code> is deleted,
PolicyCenter immediately identifies the deletion. </p></section>


<section class="section"><h2 class="title sectiontitle">Verifying locked fields and arrays</h2><p class="p">After PolicyCenter populates the locking
table, you can verify whether you have made any illegal edits. During
server startup, after loading the product model, PolicyCenter iterates
over all the rows in the locking table and tries to find a match for
each individual row. </p>
<p class="p">There are two possible scenarios.</p>
<ul class="ul">
<li class="li"><strong class="ph b riruninheader">The
entity has a Public ID</strong> – If the entity has a <code class="ph codeph">PublicID</code>, that <code class="ph codeph">PublicID</code> is always locked. If
PolicyCenter does not allow deletions for this entity, PolicyCenter searches
the locking table for a product model entity of the same type and with
the same <code class="ph codeph">PublicID</code>. The
possible outcomes are:
<ul class="ul">
<li class="li">PolicyCenter cannot
find a match in the locking table and assumes that the entity was deleted.
PolicyCenter adds a message to the server log and fails to start.</li>
<li class="li">PolicyCenter
finds a match in the locking table and compares all the locked fields
against the product model entity. If this comparison fails, PolicyCenter
adds a message to the server log and fails to start. In the error case,
PolicyCenter issues specific error messages such as: <span class="ph uicontrol">You changed field </span><dfn class="term">A</dfn><span class="ph uicontrol">
on entity </span><dfn class="term">B</dfn><span class="ph uicontrol"> to value </span><dfn class="term">C</dfn><span class="ph uicontrol">.
Please set it back to </span><dfn class="term">A</dfn><var class="keyword varname">.</var></li>
</ul>

</li>

<li class="li"><strong class="ph b riruninheader">The entity does
not have a Public ID</strong> – The entity has no <code class="ph codeph">PublicID</code>. A subset of the product
model entities do not have a <code class="ph codeph">PublicID</code>.
If deletions for this entity are not allowed, PolicyCenter attempts to
find a complete match for the product model entity in the locking table.
If it does not find a complete match, PolicyCenter adds an <code class="ph codeph">Entity Deleted</code> or <code class="ph codeph">Modified</code> error to the server log
and fails to start.</li>
</ul>
</section>



<section class="section"><h2 class="title sectiontitle">Adding new entities</h2><p class="p">You can add new product model patterns to the product model at any time. However, after you add
                new product model patterns on the test or production server, PolicyCenter locks
                those entities and does not allow further changes to immutable fields on those
                entities. Additionally, in most cases, the entity cannot be deleted. During server
                startup, if PolicyCenter finds an entity for which there are no corresponding rows
                in the locking table, it assumes that the entity is new. If so, it iterates across
                the entity definition and inserts rows into the locking table as appropriate. During
                the subsequent server startups, PolicyCenter verifies its locally stored product
                model against the product model it is loading.</p></section>

</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 21, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>