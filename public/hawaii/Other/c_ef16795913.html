
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="GenericCenter uses secondary assignment in the context of user roles assigned to an entity that does not have a single owner. For example, an entity can have multiple roles associated with it as it ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="concept" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="c_ef16795913" /><meta name="DC.language" content="en-US" /><title>Secondary (role-based) assignment entities</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="c_ef16795913" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="c_ef16795913__ef16795913">

<h1 class="title topictitle1" id="c_ef16795913__ef16795913">Secondary (role-based) assignment entities</h1>
<div class="body conbody">
<p class="p"><span class="keyword">GenericCenter</span> uses <dfn class="term">secondary assignment</dfn> in the context of
user roles assigned to an entity that does not have a single owner. For
example, an entity can have multiple roles associated with it as it moves
through <span class="keyword">GenericCenter</span>, with each
role assigned to a specific person. As each of the roles can be held
by only a single user, <span class="keyword">GenericCenter</span>
represents the relationship by an array of <code class="ph codeph">UserRoleAssignment</code> entities. These
<code class="ph codeph">UserRoleAssignment</code> entities
are primarily assignable and implement the <code class="ph codeph">Assignable</code> delegate. </p>
<p class="p">Thus, for an entity to
be secondarily assignable, it must have an associated array of role assignments,
the <code class="ph codeph">RoleAssignments</code> array.
(This array contains the set of <span class="keyword apiname">UserRoleAssignment</span>
objects.) </p>
<p class="p">In the <span class="keyword">GenericCenter</span> base configuration,
the following objects all contain a <code class="ph codeph">RoleAssignments</code>
array:</p>
<ul class="ul">
<li class="li"><code class="ph codeph">Account</code></li>
<li class="li"><code class="ph codeph">Claim</code></li>
<li class="li"><code class="ph codeph">Exposure</code></li>
<li class="li"><code class="ph codeph">Job</code> (and all its subtypes)</li>
<li class="li"><code class="ph codeph">Policy</code></li>
</ul>

<p class="p">For example, an entity—such as <code class="ph codeph">Account</code>—does not have a single
owner. Instead, an account has a set of <span class="keyword apiname">User</span> objects associated with it,
each of which has a particular <code class="ph codeph">Role</code>
with respect to the <code class="ph codeph">Account</code>.
As only a single <code class="ph codeph">User</code>
can hold each <code class="ph codeph">Role</code>, <span class="keyword">GenericCenter</span> represents the relationships
by a set of <code class="ph codeph">UserRoleAssignment</code>
entities.</p>
<p class="p">To state this differently,
it is possible to assign several different users to the same entity,
but with different roles. It is also possible for the same user to have
several roles on an entity. (Some common role types are Creator, Underwriter,
and Producer.)</p>
<section class="section"><h2 class="title sectiontitle">Determining the available roles on an <code class="ph codeph">Account</code>,
                        <code class="ph codeph">Job</code>, or <code class="ph codeph">Policy</code> object</h2><div class="p">PolicyCenter uses the following
method to determine the available roles to display in the assignment
drop-down as you edit an assignment on an account, job, or policy (the
<span class="keyword parmname">owner</span> parameter):
<pre class="pre codeblock"><code>gw.assignment.AssignmentUtil.filterAssignableRoles(owner, role)</code></pre></div>
<p class="p">The method filters
the typekeys defined in the <code class="ph codeph">UserRole</code>
typelist by the specified role type (the <span class="keyword parmname">role</span> parameter). It returns <code class="ph codeph">true</code> for those typekeys it determines
are available in the assignment drop-down. For example, suppose that
you start with the existing assignments on an account:</p>
<ul class="ul">
<li class="li">Creator – Bruce
Baker</li>
<li class="li">Producer
– Bruce Baker</li>
<li class="li">Underwriter
– Alice Applegate</li>
</ul>

<p class="p">If you want to add a new participant
(assign a new role), then you need to do the following:</p>
<ul class="ul">
<li class="li">Determine the
set of roles in the <code class="ph codeph">UserRole</code>
typelist (Auditor, AuditExaminer, Creator, Producer, and so on).</li>
<li class="li">Pass each
individual role type and the account (the owner in this case) to the
<code class="ph codeph">filterAssignableRoles</code>
filter method.</li>
</ul>

<p class="p"><span class="ph">As you call the method for the auditor
role, the filter method determines that there is no currently existing
user with that role on the account</span> and returns
<code class="ph codeph">true</code>. <span class="keyword">GenericCenter</span> then displays the <span class="ph uicontrol">Auditor</span> role in the assignment
drop-down in the <span class="keyword">GenericCenter</span>
interface. However, if you pass the producer role to the filter method,
it determines that this role does currently exist on this account and
returns <code class="ph codeph">false</code>. Thus, <span class="keyword">GenericCenter</span> does not display the
<span class="ph uicontrol">Producer</span> role in the
assignment drop-down in the <span class="keyword">GenericCenter</span>
interface.</p></section>






<section class="section"><h2 class="title sectiontitle">Permitting multiple users to share the same role on an entity</h2>
<p class="p">It is not possible—in
the base configuration—for different users to share the same role on
an entity. PolicyCenter enforces this behavior by setting a <code class="ph codeph">UserRoleConstraint</code> category on
each role in the <code class="ph codeph">UserRole</code>
typelist. For example, PolicyCenter associates the following <code class="ph codeph">UserRoleConstraint</code> categories
with the <code class="ph codeph">AuditExaminer</code>
role:</p>
<ul class="ul">
<li class="li"><code class="ph codeph">UserRoleConstraint.accountexclusive </code></li>
<li class="li"><code class="ph codeph">UserRoleConstraint.jobexclusive </code></li>
<li class="li"><code class="ph codeph">UserRoleConstraint.policyexclusive </code></li>
</ul>

<p class="p">These constraints mandate that an account
(or job or policy) can have at most one user assigned to the <code class="ph codeph">AuditExaminer</code> role. Internally,
the <span class="keyword apiname">filterAssignableRoles</span>
method uses these constraints to enforce this behavior. Thus, to permit
multiple users to share the same role on an entity, you need to remove
that restriction (category) from that role type in the <code class="ph codeph">UserRole</code> typelist. For example,
to remove the restriction that an account can have only one associated
user with the <code class="ph codeph">AuditExaminer</code>
role, simply remove that category (<code class="ph codeph">UserRoleConstraint.accountexclusive</code>)
from the <code class="ph codeph">AuditExaminer</code>
role.</p>
<p class="p">To determine the categories
set on a role, select a typecode (a role) from the <span class="ph uicontrol">UserRole</span> typelist and view the
<span class="ph uicontrol">Categories</span> pane.</p></section>

<section class="section"><h2 class="title sectiontitle">Secondary assignment and round-robin assignment</h2>
<p class="p">Secondary assignment uses
the assignment owner to retrieve the round-robin state. What this means
is that different secondary assignments on the same assignment owner
can end up using the same round-robin state, and they can affect each
other.</p>
<p class="p">In general, if you use
different search criteria for different secondary assignments, you do
not encounter this problem as the search criteria is most likely different.
However, if you want to want to make absolutely sure that different secondary
assignments follow different round-robin states, then you need to extend
the search criteria. In this case, add a flag column and set it to a
different value for each different kind of secondary assignment. See
<a class="xref" href="c_ef15939640.html#c_ef15939640">Round-robin assignment</a> for more information on this type of
assignment.</p></section>
</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 20, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>