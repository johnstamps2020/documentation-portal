
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="The IPolicyTermPlugin policy term plugin calculates values related to policy terms. PolicyCenter includes a built-in implementation of this plugin in the Gosu PolicyTermPlugin class. You can modify ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="concept" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="c_dj2391418" /><meta name="DC.language" content="en-US" /><title>Policy term plugin</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="c_dj2391418" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="c_dj2391418__dj2391418">

<h1 class="title topictitle1" id="c_dj2391418__dj2391418">Policy term plugin</h1>
<div class="body conbody">
<p class="p">The <code class="ph codeph">IPolicyTermPlugin</code>
policy term plugin calculates values related to policy terms. PolicyCenter
includes a built-in implementation of this plugin in the Gosu <span class="keyword apiname">PolicyTermPlugin</span> class. You can
modify this plugin to customize it. Alternatively, implement your own
instance of this plugin to customize PolicyCenter application logic.</p>
        <section class="section"><h2 class="title sectiontitle">Calculate the period end date from a term type</h2>
            
            <p class="p">Implement the <span class="keyword apiname">calculatePeriodEnd</span> method which returns the default
                expiration date as a <span class="keyword apiname">java.util.Date</span> object.</p>
            <pre class="pre codeblock"><code>override function calculatePeriodEnd( effDate : Date, term : TermType, policyPeriod : PolicyPeriod ):
        Date</code></pre>
            <p class="p">The input parameters to <code class="ph codeph">calculatePeriodEnd</code> are described below.</p>
            <ul class="ul" id="c_dj2391418__ul_slz_fbh_nhb">
                <li class="li"><code class="ph codeph">effDate</code> – The effective or start date of the policy period</li>
                <li class="li"><code class="ph codeph">term</code> – The policy term type in the form of a
                        <code class="ph codeph">TermType</code> typecode. The value must be the
                        <code class="ph codeph">policyPeriod.TermType</code> unless the
                        <code class="ph codeph">policyPeriod.TermType</code> is <code class="ph codeph">null</code>.</li>
                <li class="li"><code class="ph codeph">policyPeriod</code> – The policy period
                        (<span class="keyword apiname">PolicyPeriod</span> object)</li>
            </ul>

            <p class="p">This plugin method must set the expiration date for every <code class="ph codeph">TermType</code>
                value. In the built-in implementation, term type possible values are
                    <code class="ph codeph">Annual</code>, <code class="ph codeph">HalfYear</code>, and <code class="ph codeph">Other</code>.
                You can extend this typelist as desired.</p>
            <p class="p">Guidewire recommends you make the calculations in this method simple, such as adding
                a fixed number of years, months, or days. If you make the calculations too complex,
                you might need to check for edge case conditions in other PolicyCenter code.
                Consider explaining these conditions in the user interface so users understand how
                these values were calculated.</p>
        </section>
        <section class="section"><h2 class="title sectiontitle">Date reconciliation in the built-in implementation</h2>
            
            <p class="p">Certain term types, such as half-year terms, have varying numbers of days. Date
                reconciliation ensures that, in the start month of the initial policy period, a new
                policy period starts on the same day of the month as the initial policy period. For
                example, date reconciliation ensures that two half-year terms provide coverage for
                one year exactly. You may need to implement date reconciliation for your custom term
                types.</p>
            <p class="p">This topic describes how the <span class="keyword apiname">calculatePeriodEnd</span> method in the
                built-in plugin implementation (<span class="keyword apiname">PolicyTermPlugin</span>) does date
                reconciliation for half-year terms. In some calculations, the built-in
                implementation uses the initial policy period start date, the start date of the
                first policy period for this policy.</p>
            <p class="p">Assume a policy with a half-year term where the first policy period starts on day X
                of a month. The <span class="keyword apiname">calculatePeriodEnd</span> method provides date
                reconciliation for the policy period end date by finding the first matching
                condition.</p>
            <table class="table" id="c_dj2391418__dj2607065"><colgroup><col /><col /></colgroup><thead class="thead">
                        <tr>
                            <th class="entry" id="c_dj2391418__dj2607065__entry__1">
                                <p class="p">Condition</p>
                            </th>
                            <th class="entry" id="c_dj2391418__dj2607065__entry__2">
                                <p class="p">Period end</p>
                            </th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__1 ">
                                <p class="p">1. If the initial policy period start date is day X of a
                                    month</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__2 ">
                                <p class="p">The policy period end date is day X unless one of the following
                                    conditions is true.</p>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__1 ">
                                <p class="p">2. If the initial policy period start date is day X of a month
                                    and the policy period end date is in a month with fewer than
                                    X days</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__2 ">
                                <p class="p">The policy period end date is the last day of the month.</p>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__1 ">
                                <p class="p">3. If the initial policy period start date is day X of a month,
                                    and X is the last day of the month</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2607065__entry__2 ">
                                <p class="p">Subsequent policy period end dates are the last day of the
                                    month.</p>
                            </td>
                        </tr>
                    </tbody></table>
            <p class="p">For example, the first half-year term of a policy starts on August 30, 2018. The
                month of August has 31 days. Date reconciliation ensures two half-year terms provide
                coverage for a full year.</p>
            <table class="table" id="c_dj2391418__dj2583898"><colgroup><col /><col /><col /></colgroup><thead class="thead">
                        <tr>
                            <th class="entry" id="c_dj2391418__dj2583898__entry__1">
                                <p class="p">Period start</p>
                            </th>
                            <th class="entry" id="c_dj2391418__dj2583898__entry__2">
                                <p class="p">Period end</p>
                            </th>
                            <th class="entry" id="c_dj2391418__dj2583898__entry__3">
                                <p class="p">Description</p>
                            </th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__1 ">
                                <p class="p">August 30, 2018</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__2 ">
                                <p class="p">February 28, 2019</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__3 ">
                                <p class="p">Condition 2 applies. The period end month, February, has fewer
                                    than 30 days, so the period ends on the last day of
                                    February.</p>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__1 ">
                                <p class="p">February 28, 2019</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__2 ">
                                <p class="p">August 30, 2019</p>
                            </td>
                            <td class="entry" headers="c_dj2391418__dj2583898__entry__3 ">
                                <p class="p">Condition 1 applies. Conditions 2 and 3 are not relevant. August
                                    is the same month that the initial policy period started, so the
                                    period ends on the same day.</p>
                            </td>
                        </tr>
                    </tbody></table>
            <p class="p">The built-in plugin uses the <span class="keyword parmname">policyPeriod</span> parameter for date
                reconciliation. The <span class="keyword apiname">calculatePeriodEnd</span> method uses the
                    <code class="ph codeph">shouldPerformDateReconciliation</code> flag on
                    <span class="keyword apiname">PolicyPeriod.Job</span> to determine whether to reconcile the date.
                By default, the flag is <code class="ph codeph">false</code>. However, the submission, renewal,
                rewrite, and rewrite new account jobs set the flag to <code class="ph codeph">true</code>.</p>
        </section>
        <section class="section"><h2 class="title sectiontitle">Calculate a term type from period start and end dates</h2>
            
            <p class="p">Implement the <span class="keyword apiname">calculatePolicyTerm</span> method to determine the term
                type of a policy term given its start date, a period end date, and a
                    <code class="ph codeph">Product</code>. The method must return a <code class="ph codeph">TermType</code>
                typecode.</p>
            <p class="p">To make date calculations time-insensitive, consider using the
                    <span class="keyword apiname">PolicyPeriod</span> method <span class="keyword apiname">trimToMidnight</span> to trim
                excess time values backward to midnight.</p>
            <p class="p">Some lines of business allow extra days of coverage at the end of an annual policy
                term (<code class="ph codeph">TermType</code> is <code class="ph codeph">Annual</code>) just in case the policy
                has not yet been renewed. You can add additional days to an annual term by
                implementing the <code class="ph codeph">AdditionalDaysInAnnualTerm</code> property in the
                    <code class="ph codeph">PolicyLineMethods</code> implementation class for one or more lines of
                business. These classes have names with the LOB prefix with the pattern
                    <var class="keyword varname">LOB</var><code class="ph codeph">PolicyLineMethods</code>. In the base
                configuration, an annual workers’ compensation policy provides coverage for one year
                plus 16 days by defining this property in the <span class="keyword apiname">WCPolicyLineMethods</span>
                class.</p>
            <pre class="pre codeblock"><code>override property get AdditionalDaysInAnnualTerm() : int {
    return 16
}</code></pre>
        </section>
        <section class="section"><h2 class="title sectiontitle">Calculate period end from a based on <code class="ph codeph">PolicyPeriod</code></h2>
            
            <p class="p">Implement the <span class="keyword apiname">calculatePeriodEndFromBasedOn</span> method to return the
                default expiration date based on the effective date, the term type, and a based-on
                    <code class="ph codeph">PolicyPeriod</code>. This method must always return a non-null date.
                The return value is a <code class="ph codeph">java.util.Date</code>.</p>
            <p class="p">The method accepts the following arguments.</p>
            <ul class="ul" id="c_dj2391418__ul_nz3_kbh_nhb">
                <li class="li"><code class="ph codeph">effDate</code> – The effective or start date of the policy period</li>
                <li class="li"><code class="ph codeph">term</code> – The policy term type in the form of a
                        <code class="ph codeph">TermType</code> typecode. Set the expiration date for every
                        <code class="ph codeph">TermType</code> value and throw an exception for unexpected term
                    types. In the built-in implementation, term type possible values are
                        <code class="ph codeph">Annual</code>, <code class="ph codeph">HalfYear</code>, and
                        <code class="ph codeph">Other</code>. You can extend this typelist as desired.</li>
                <li class="li"><code class="ph codeph">policyPeriod</code> – A <span class="keyword apiname">PolicyPeriod</span> object that a
                    new period is based on</li>
                <li class="li"><code class="ph codeph">shouldPerformDateReconciliation</code> – A Boolean value that
                    specifies whether to perform date reconciliation. Date drifting occurs when a
                    policy term of a given <code class="ph codeph">TermType</code> (or multiple policy terms) does
                    not cover the expected number of days. For example, two consecutive policy terms
                    with the term type <code class="ph codeph">HalfYear</code> would provide exactly one year of
                    coverage, so date reconciliation ensures that behavior. The base configuration
                    implements the following characteristics. <ul class="ul" id="c_dj2391418__ul_gcj_kbh_nhb">
                        <li class="li">The end date of the second term lines up with the start date of the
                            first term so that together, they cover one year just as an annual term
                            would.</li>
                        <li class="li">Consecutive annual terms naturally have the same start day, but are
                            adjusted for leap year days.</li>
                    </ul>

                </li>
            </ul>

            <p class="p">For the returned date, the time part of the returned expiration date will be ignored
                in favor of the existing expiration time as set by the effective time plugin.</p>
        </section>
</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 21, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>