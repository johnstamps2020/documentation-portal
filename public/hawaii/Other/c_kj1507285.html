
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><link rel="shortcut icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><link rel="icon" href="../oxygen-webhelp/template/resources/images/webpagelogo.ico"><!----></link><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="A similar class to the LockingLazyVar class is the Cache class. An instance of this class declares a concurrent cache of values that you can look up quickly and in a thread-safe way. The cache is ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.type" content="concept" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="c_kj1507285" /><meta name="DC.language" content="en-US" /><title>Concurrent cache</title><!--  Generated with Oxygen version 21.1, build number 2019083011.  --><meta name="wh-path2root" content="../" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/arial-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-regular.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-light-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-extralight-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-black-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/sourcesanspro-semibold-webfont.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/AvenirNextLTPro-Regular.woff" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/fonts/cour.woff2" as="font" /><link rel="preload" href="../oxygen-webhelp/template/resources/js/simplebar.js" as="script" /><link rel="preload" href="../oxygen-webhelp/template/resources/css/simplebar.min.css" as="style" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/dharmachakra.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/chevron-right.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/share-alt.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/print-solid.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/times.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/angle-double-left.svg" as="image" /><link rel="preload" href="../oxygen-webhelp/template/resources/images/note.svg" as="image" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css?buildId=20191106" /><link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css?buildId=20191106" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2019083011" /><script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.4.1.min.js?buildId=20191106"><!----></script><script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script><link rel="preload" href="" as="document" /><link rel="preload" href="" as="document" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/Guidewire-whr.css?buildId=2019083011" /></head>
    
    <body id="c_kj1507285" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header navbar-fixed-top" id="affix1">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="../index.html" class=" wh_logo not-hidden-xs "><img src="../oxygen-webhelp/template/resources/images/Guidewire_mini_logo.jpg" alt="Hawaii Documentation Demo" /></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Hawaii Documentation Demo</span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
				
                
                
            </div>
			<!-- <div class="publicationDropDown">This Publication</div> -->
			<div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div></form></div>
			<div id="userAccount">
			<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span>
            <!--<span id="accountInfo"></span>-->            
            <span class="dropdown" id="show_profile" style="display: none;">
                <button class="dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="fas fa-dharmachakra"></span></button>
                <ul class="dropdown-menu">
                    <li class="avatar_userName"></li>
                    <li class="divider" id="divider-admin"></li>
                    <li><a href="#" id="bt_editProfile">Edit</a></li>
                    <li><a href="#" id="bt_logOff">Logout</a></li>
                </ul>
            </span>
            
            </div>
			<!-- <div class="Login">
				<span>
				<i class="fas fa-dharmachakra" id="bt_logIn"></i>
			</span></div> -->
        </div>
    </div>
</header>
        
        <!--<whc:webhelp_search_input/>-->
        
        <div class="container-fluid">
            <div class="row navbar navbar-fixed-top" id="affix2">
                <nav class="wh_tools hidden-print">
                    <span class="openNav" type="button" aria-expanded="true"><i class="fas fa-bars"></i></span>
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links_header" class="navheader"></span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <!--<whc:webhelp_expand_collapse_sections/>-->
                        <span class=" shareLink share "><a class="button fas fa-share-alt" data-sharer="email" data-title="" data-url="" data-subject="" data-to="" title="Share this page" aria-label="Share this page" href=""></a></span>
                        <!-- <whc:webhelp_pdf_link class="pdf"/> -->
                        <span class=" whPrintLink print "><button class="fas fa-print fa-1x" onClick="window.print()" title="Print this page" aria-label="Print this page"></button></span>
                    </div>
                </nav>
            </div>
            
            <div class="wh_content_area">
                <div class="row justify-content-lg-end">
                    
                    
                    <div id="wh_topic_body" class="col-lg-6 col-md-9 col-sm-9 col-xs-12"><!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="c_kj1507285__kj1507285">

<h1 class="title topictitle1" id="c_kj1507285__kj1507285">Concurrent cache</h1>
<div class="body conbody">
<p class="p" id="c_kj1507285__kj1444234">A similar class to
the <span class="keyword apiname">LockingLazyVar</span> class is the <span class="keyword apiname">Cache</span> class. An instance of this class declares
a concurrent cache of values that you can look up quickly and in a thread-safe
way. The cache is similar to a Least Recently Used (LRU) cache. Because the <span class="keyword apiname">Cache</span>
class uses the Java concurrency libraries, access to the cache is thread-safe.
Each entry in the cache is defined by a key, which is also called an
input value. A block uses the value of the key to calculate the value
of the cache entry.</p>
<p class="p">The constructor for a cache requires:</p>
<ul class="ul">
<li class="li">A name as a <code class="ph codeph">String</code>. The implementation uses
this name to generate logging for cache misses.</li>
<li class="li">The size, as a number
of slots.</li>
<li class="li">A block that defines a
function to calculate a value from a key. Typically, this calculation
is resource-intensive.</li>
</ul>

<p class="p">Use the key and value types to parameterize the <code class="ph codeph">Cache</code> type using Gosu generics
syntax. For example, if you need to pass a <code class="ph codeph">String</code> to the cache and get an
<code class="ph codeph">Integer</code> back, create a
new <code class="ph codeph">Cache&lt;String, Integer&gt;</code>.</p>
<p class="p">To use the cache, call the <span class="keyword apiname">get</span> method and pass an input value,
which is the key. If the value for the key is in the cache, <code class="ph codeph">get</code> returns that value. If the
value is not cached, Gosu calls the block to calculate the value from
the key and then caches the result. On any subsequent call of the <span class="keyword apiname">get</span> method, the value is the same
but Gosu uses the cached value, if it is still in the cache. If too many
items were added to the cache and the required item is unavailable, Gosu
reruns the block to regenerate the value. Gosu then caches the result
again.</p>
<p class="p">To use a cache within another class, you
can define a static instance of the cache. The static variable definition
defines your block. Because the <span class="keyword apiname">Cache</span>
class uses the Java concurrency libraries, this static implementation
is thread-safe. For example, in your class definition, define a static
variable like this:</p>
<pre class="pre codeblock"><code>static var _myCache = new Cache&lt;String, Integer&gt;( "StrToInt", 1000, \ str -&gt; getMyInt( str ) )</code></pre><p class="p">To use your cache, get a value
from the cache using code like the following. In this example, <code class="ph codeph">inputString</code> is a <code class="ph codeph">String</code> variable that may or may
not contain a <code class="ph codeph">String</code> that
you used before with this cache:</p>
<pre class="pre codeblock"><code>var fastValue = _myCache.get( inputString )</code></pre><p class="p">The first time you call the
<span class="keyword apiname">get</span> method, Gosu calls
the block to generate the <code class="ph codeph">Integer</code>
value.</p>
<p class="p">On any subsequent call of the <span class="keyword apiname">get</span> method, the value is the same
but Gosu uses the cached value, if it is still in the cache. If too many
items were added to the cache and the required item is unavailable, Gosu
reruns the block to regenerate the value. Gosu then caches the result
again in the concurrent cache object.</p>
<p class="p">An even better way to use the cache is
to abstract the cache implementation into a property accessor function.
A private static object <span class="keyword apiname">Cache</span>
object, as shown in the previous example, can handle the actual cache.
For example, define a property accessor function such as:</p>
<pre class="pre codeblock"><code>static property get function MyInt( str : String ) {
  return _myCache.get( str )
}</code></pre>
<p class="p">These code examples are demonstrations that have a
simple operation in the block. Typically, the overhead of maintaining
the cache is appropriate if your calculation is resource-intensive and
you expect repeated access with the same input values.</p>
<div class="note warning note_warning"><span class="note__title">Warning:</span> Incorrect implementation
of caching can lead to run-time errors and data corruption. Only use
caches as a last resort for performance issues.</div>
</div>
</article></main></div>
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" class="col-lg-2 hidden-sm hidden-xs navbar hidden-print"> <!-- /*DOCS-323 WebHelp Feedback - Adjust column widths*/-->
                            <div></div>
                        </nav>
                    
                </div>
            </div>
        </div> 
        <nav class="navbar navbar-default wh_footer navbar-bottom">
  <div class=" footer-container text-center ">
    <p><span class="footercopyright">© 2019 Guidewire Software, Inc.</span><span class="footerDate">Published November 20, 2019</span></p>
  </div>
</nav>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <!-- <script src="${oxygen-webhelp-assets-dir}/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
        
    </body>
</html>