<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2020"><meta name="DC.rights.owner" content="(C) Copyright 2020"><meta name="DC.type" content="concept"><meta name="description" content="Connect a client application that has a JavaScript client side but no trusted server side."><meta name="DC.relation" scheme="URI" content="../../guidewire-identity-federation-hub/topics/c_choose-app-flow.html"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="xd_cf0857481548101b--192595-1714b3f1b9a--7f5c"><meta name="DC.language" content="en-US"><link rel="stylesheet" type="text/css" href="../../commonltr.css"><title>Using the Authorization Code flow with PKCE</title></head><body id="xd_cf0857481548101b--192595-1714b3f1b9a--7f5c"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
 <h1 class="title topictitle1" id="ariaid-title1">Using the Authorization Code flow with PKCE</h1>
 
 <div class="body conbody"><p class="shortdesc">Connect a client application that has a JavaScript client side but no trusted server
  side.</p>
  <p class="p">If there is no trusted server, then there is no place to store the client secret. The PKCE
   extension to the standard Authorization Code flow provides additional elements to act like the
   secret.</p>
  <div class="p">The Authorization Code with PKCE flow begins when the user clicks on n control that requires
   authentication or authorization. The client generates a cryptographically secure secret, and then
   calls Guidewire Hub via an HTTP GET with the following parameters:<dl class="dl parml">
    
     <dt class="dt pt dlterm">client_id </dt>
     <dd class="dd pd">The client ID that is provided during application registration.</dd>
    
    
     <dt class="dt pt dlterm">redirect_uri</dt>
     <dd class="dd pd">The URI to which Guidewire Hub returns after checking whether to allow the request. The
      URI must match one of the redirect URIs specified during client registration. Using a
      registered URI ensures that the request result is sent to an authorized recipient.</dd>
    
    
     <dt class="dt pt dlterm">response_type</dt>
     <dd class="dd pd">Set this to <code class="ph codeph">code</code>, indicating that Guidewire Hub grants an
      authorization code that can be used in combination with the generated secret to get an access
      token.</dd>
    
   </dl><dl class="dl parml">
    
     <dt class="dt pt dlterm">scope</dt>
     <dd class="dd pd">One or more scopes describing the extent of the access that the client needs.</dd>
    
    
     <dt class="dt pt dlterm">state</dt>
     <dd class="dd pd">A string that is returned to the client via a parameter added to the
       <code class="ph codeph">redirect_uri</code>. This string is usually used to prevent CSRF attacks. For
      example, the client puts a random value in the <code class="ph codeph">state</code> parameter, and when it
      receives a response at the <code class="ph codeph">redirect_uri</code> it checks to see if the state
      parameter contains that same value. This prevents an attacker from pretending to be the
      Guidewire Hub, since only the genuine Guidewire Hub would have the <code class="ph codeph">state</code>
      value provided in the initial request.</dd>
    
    
     <dt class="dt pt dlterm">code_challenge</dt>
     <dd class="dd pd">The result of calling the SHA 256 cryptographic hash function on the generated secret.</dd>
    
    
     <dt class="dt pt dlterm">code_challenge_method</dt>
     <dd class="dd pd">Set this parameter to <code class="ph codeph">S256</code>.</dd>
    
   </dl></div>
  <div class="p">Control of the flow then passes to Guidewire Hub. The browser sends Guidewire Hub any
   existing cookies for the user, allowing it to access the user's existing session information. If
   the user is already authorized, Guidewire Hub allocates a new code and redirects back to the
   client right away. In other cases, Guidewire Hub displays a login window or, if the user is
   already logged in, another window providing a description of the scopes being requested by the
   client. Guidewire Hub then determines whether the client is authorized for the requested
   access on behalf of the user. If so, Guidewire Hub redirects back to the client at the
    <code class="ph codeph">redirect_uri</code>, passing the following parameters:<dl class="dl parml">
    
     <dt class="dt pt dlterm">code</dt>
     <dd class="dd pd">The newly created authorization code, which can be exchanged for a token providing the
      requested access to the resource. Note that the code is generated with respect to the hashed
      value of the generated secret.</dd>
    
    
     <dt class="dt pt dlterm">state</dt>
     <dd class="dd pd">The same state string that was provided in the original GET request.</dd>
    
   </dl></div>
  <p class="p">Guidewire Hub stores the hashed value of the generated secret, which is associated with the
   code, so that it can exchange the code for an access token later. The client finishes the process
   by making a POST request to Guidewire Hub, passing the authorization code and the generated
   secret. The server responds with the access token that the client can use to access the resource.
   The authorization code returned by the PKCE flow is short-lived, so this exchange should be done
   right away.</p>
 </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="c_choose-app-flow.html">Choosing an OAuth 2.0 application flow</a></div></div></nav></article></main></body></html>