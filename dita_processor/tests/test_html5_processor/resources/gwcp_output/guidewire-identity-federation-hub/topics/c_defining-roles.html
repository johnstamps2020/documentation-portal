<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2020"><meta name="DC.rights.owner" content="(C) Copyright 2020"><meta name="DC.type" content="concept"><meta name="DC.relation" scheme="URI" content="../../guidewire-identity-federation-hub/topics/c_custom-apps.html"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="xd_cf0857481548101b--192595-1714b3f1b9a--7f65"><meta name="DC.language" content="en-US"><link rel="stylesheet" type="text/css" href="../../commonltr.css"><title>Defining roles for custom applications</title></head><body><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f65">
  <h1 class="title topictitle1" id="ariaid-title1">Defining roles for custom applications</h1>
  <div class="body conbody"><p class="p"><dfn class="term">Roles</dfn> determine the permissions that are granted to
      applications and users connecting to Guidewire Hub. Each role is defined by a YAML file in
      your InsuranceSuite application configuration that lists the permitted API endpoints and
      accessible fields on the system APIs. For example, the file that defines the permissions for
      the <code class="ph codeph">Adjuster</code> role would be named <span class="ph filepath">Adjuster.role.yaml</span>.</p>
    <p class="p">When Guidewire Hub receives a validation request from your application, it determines
      which roles apply to the request. Guidewire Hub returns the roles as groups or scopes in
      the token, depending on the application type.</p>
    <div class="p">Role names returned in the token must be prepended with <code class="ph codeph">cc.</code>. For example, if
      you have a role named <code class="ph codeph">Adjuster</code>, it must be named <code class="ph codeph">cc.Adjuster</code>
      in the token. ClaimCenter does the following:<ul class="ul" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f65__ul_i4g_tqb_3lb">
        <li class="li">Extracts the groups and scopes from the received token.</li>
        <li class="li">Identifies any groups and scopes that begin with <code class="ph codeph">cc.</code>.</li>
        <li class="li">Strips off the <code class="ph codeph">cc.</code>.</li>
        <li class="li">Uses the remaining name as the name of a valid role for the request.</li>
        <li class="li">Reads the <span class="ph filepath"><var class="keyword varname">Role</var>.role.yaml</span> file to obtain the
          permissions for the request.</li>
      </ul></div>
    <p class="p seealso">See also</p>
    <ul class="ul" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f65__ul_zqq_kt5_hlb">
      <li class="li"><a class="xref" href="t_define-roles-browser-app.html#xd_cf0857481548101b--192595-1714b3f1b9a--7f5b" title="The roles returned in the SAML response identify the permissions for the request.">Specify roles for browser-based applications</a></li>
      <li class="li"><a class="xref" href="t_define-roles-service-app.html#xd_cf0857481548101b--192595-1714b3f1b9a--7f56" title="The roles returned in the SAML response identify the permissions for the request.">Specify roles for service applications</a></li>
    </ul></div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../guidewire-identity-federation-hub/topics/c_custom-apps.html">Developing custom applications</a></div></div></nav><article class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f63">
  <h2 class="title topictitle2" id="ariaid-title2">Assign permissions to system REST API roles</h2>
  
  <div class="body taskbody"><p class="shortdesc">Create YAML files to assign endpoint permissions
    to application roles.</p>
    <section class="section context">For each role that you will use, create a file named
        <span class="ph filepath"><var class="keyword varname">Role</var>.role.yaml</span>. For example, for the
        <code class="ph codeph">Insured</code> role, create a file called <span class="ph filepath">Insured.role.yaml</span>. </section>
    <section><ol class="ol steps"><li class="li step stepexpand">
        <span class="ph cmd">In Guidewire Studio, navigate to <span class="ph menucascade"><span class="ph uicontrol">configuration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">config</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Integration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">roles</span></span>.</span>
      </li><li class="li step stepexpand">
        <span class="ph cmd">Right-click the <span class="ph uicontrol">roles</span> folder, and then click <span class="ph menucascade"><span class="ph uicontrol">New</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">File</span></span>.</span>
      </li><li class="li step stepexpand">
        <span class="ph cmd">In the <span class="ph uicontrol">New File</span> dialog, type the name of the new role
          file.</span>
        <div class="itemgroup info">Name the file with the extension <span class="ph filepath">.yaml</span>.</div>
      </li><li class="li step stepexpand">
        <span class="ph cmd">Specify the following information in the file. Refer to the base YAML files in the same
          folder as a reference.</span>
        <div class="itemgroup info">
          <dl class="dl parml">
            
              <dt class="dt pt dlterm">endpoints</dt>
              <dd class="dd pd">The list of service endpoints the role provides access to, and the HTTP methods
                allowed to access them. For
                example:<pre class="pre codeblock"><code>endpoints:
  - endpoint: /claim/v1/claims
    methods:
      - GET
      - POST
  - endpoint: "/claim/v1/claims/*"
    methods:
      - GET
...</code></pre></dd>
            
            
              <dt class="dt pt dlterm">accessibleFields</dt>
              <dd class="dd pd">The list of system REST API resources and schema properties that are accessible.
                For
                example:<pre class="pre codeblock"><code>accessibleFields:
  Claim:
    view:
      - claimNumber
      - closeDate
      - description
...
    edit:
      - description
      - howReported
      - lossCause
      - lossDate
...</code></pre></dd>
            
            
              <dt class="dt pt dlterm">name</dt>
              <dd class="dd pd">The name of the system REST API role. For
                example:<pre class="pre codeblock"><code>name: Insured</code></pre></dd>
            
          </dl>
        </div>
      </li></ol></section>
    <section class="section postreq" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f63__postreq_chd_p1c_3lb">
      <p class="p seealso">See also</p>
      <ul class="ul" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f63__ul_dmy_p1c_3lb">
        <li class="li"><a class="xref" href="c_defining-roles.html#xd_cf0857481548101b--192595-1714b3f1b9a--7f07">The default role</a></li>
      </ul>
    </section>   
  </div>
</article><article class="topic concept nested1" aria-labelledby="ariaid-title3" lang="en-US" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f62">
  <h2 class="title topictitle2" id="ariaid-title3">Syntax for role files</h2>
  <div class="body conbody"><p class="p">When you define YAML role files, you specify the allowed endpoints,
      methods, system REST API resources, and schema properties. You can use wildcards when listing
      these.</p>
    <div class="p">The following are examples of using wildcards:<table class="table frame-all" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb"><caption></caption><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead class="thead">
            <tr class="row">
              <th class="entry colsep-1 rowsep-1" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__1">Example</th>
              <th class="entry colsep-1 rowsep-1" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__2">Description</th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__1 ">
                <pre class="pre codeblock"><code>/claim/v1/claims/*</code></pre>
              </td>
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__2 ">You can call <code class="ph codeph">/claim/v1/claims/cc:101</code> or
                  <code class="ph codeph">/claim/v1/claims/cc:102</code>, and so on.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__1 ">
                <pre class="pre codeblock"><code>/claim/v1/claims/**</code></pre>
              </td>
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__2 ">You can call anything under that. For example, you can call
                  <code class="ph codeph">/claim/v1/claims/cc:101</code> or
                  <code class="ph codeph">/claim/v1/claims/cc:102</code>, and you can also call
                  <code class="ph codeph">/claim/v1/claims/cc:101/contacts</code>,
                  <code class="ph codeph">/claim/v1/claims/cc:101/vehicle-incidents</code>, and
                  <code class="ph codeph">/claim/v1/claims/cc:102/contacts/cc:201</code>.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__1 ">
                <pre class="pre codeblock"><code>methods:
- "*"</code></pre>
              </td>
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__2 ">You can use all methods.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__1 ">
                <pre class="pre codeblock"><code>accessibleFields:
  "*":
    view: 
-	"*"
  edit:
-	"*"</code></pre>
              </td>
              <td class="entry colsep-1 rowsep-1" headers="xd_cf0857481548101b--192595-1714b3f1b9a--7f62__table_e4t_ppt_hlb__entry__2 ">The user can view and edit all fields on all resources.</td>
            </tr>
          </tbody></table></div></div>
</article><article class="topic concept nested1" aria-labelledby="ariaid-title4" lang="en-US" id="xd_cf0857481548101b--192595-1714b3f1b9a--7f07">
  <h2 class="title topictitle2" id="ariaid-title4">The default role</h2>
  <div class="body conbody"><p class="p">ClaimCenter includes a default role that is used for unauthenticated
      calls to the System REST APIs. The YAML file for the default role is defined in <span class="ph menucascade"><span class="ph uicontrol">configuration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">config</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Integration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">roles</span></span>, and then in the file <span class="ph filepath">DefaultRole.role.yaml</span>.</p>
    <p class="p">In the base configuration, the default role allows the <code class="ph codeph">openapi.json</code>
      endpoints to be called. The default role does not authorize anything else.</p>
    <p class="p">You can edit the default role and modify it as you want. If you delete or rename the default
      role, unauthenticated calls will result in an error.</p></div>
</article></article></article></main></body></html>