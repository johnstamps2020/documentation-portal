{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://docs.guidewire.com/config.schema.json",
  "title": "Config",
  "description": "A config for the doc-portal",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "description": "A link to the JSON schema",
      "type": "string"
    },
    "sources": {
      "description": "A list of sources where we can get files for builds",
      "type": "array",
      "items": {
        "$ref": "#/definitions/source"
      }
    },
    "docs": {
      "description": "A list of available docs, along with urls and metadata",
      "type": "array",
      "items": {
        "$ref": "#/definitions/doc"
      }
    },
    "builds": {
      "description": "A list of build configurations which include information about the source, doc, and build parameters",
      "type": "array",
      "items": {
        "$ref": "#/definitions/build"
      }
    }
  },
  "definitions": {
    "id": {
      "description": "A unique ID",
      "type": "string"
    },
    "title": {
      "description": "A human-readable title, for displaying to humans in various human scenarios. All of us humans know what it is. Right, fellow humans?",
      "type": "string"
    },
    "displayTitle": {
      "description": "An optional title that takes precedence over title in breadcrumbs, search results, etc. Used for translated content to show a translated title while leaving an English title available for TeamCity.",
      "type": "string"
    },
    "body": {
      "description": "Text explaining what the document contains. If this property is used, the doc crawler does not extract body from the document.",
      "type": "string"
    },
    "resource": {
      "additionalProperties": false,
      "required": ["targetFolder", "sourceFolder", "srcId"],
      "properties": {
        "targetFolder": {
          "description": "For resources, it is the path where we want to place the resource.",
          "type": "string"
        },
        "sourceFolder": {
          "description": "The folder in the repo to use as the start directory. Copy everything in that folder.",
          "type": "string"
        },
        "srcId": {
          "$ref": "#/definitions/id"
        }
      }
    },
    "environments": {
      "description": "Environments where we will display this doc, dev, staging, and/or prod.",
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["dev", "staging", "prod"]
      }
    },
    "metadata": {
      "description": "Metadata used for classification, search filtering, grouping on landing pages, etc.",
      "type": "object",
      "additionalProperties": false,
      "required": ["product", "platform", "language"],
      "properties": {
        "product": {
          "$ref": "#/definitions/product"
        },
        "platform": {
          "description": "The broad category of how we deliver products. Can be Self-managed or Cloud",
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Self-managed", "Cloud"]
          }
        },
        "version": {
          "description": "A version number, or a word like 'latest'",
          "type": "array",
          "examples": ["2023.02", "10.2.2", "latest"]
        },
        "release": {
          "description": "A major release",
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "Aspen",
              "Banff",
              "Cortina",
              "Dobson",
              "Elysian",
              "Flaine",
              "Garmisch",
              "Hakuba",
              "Innsbruck"
            ]
          }
        },
        "subject": {
          "description": "What the doc is about",
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "Administration",
              "Best practices",
              "Configuration",
              "Development",
              "Features and functionality",
              "Glossary",
              "Installation",
              "Integration",
              "Release notes",
              "Testing",
              "Upgrade"
            ]
          }
        },
        "language": {
          "description": "Specifies the language code. Field is mandatory. Set it to 'en' for English documents.",
          "type": "string",
          "enum": ["de", "en", "es", "es-ES", "fr", "it", "ja", "nl", "pt"]
        }
      }
    },
    "source": {
      "description": "A Git source where the build retrieves files.",
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "title", "gitUrl", "branch"],
      "properties": {
        "id": {
          "$ref": "#/definitions/id"
        },
        "title": {
          "$ref": "#/definitions/title"
        },
        "gitUrl": {
          "description": "An SSH url to a git repo containing source files for builds.",
          "pattern": "^ssh://git@stash\\.guidewire\\.com/"
        },
        "branch": {
          "description": "The branch to use when checking out. Provide a bare branch name without specification like 'refs/heads', etc.",
          "type": "string",
          "examples": ["release/1.0", "main"]
        }
      }
    },
    "product": {
      "description": "The name of the product",
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "Advanced Product Designer",
          "Analytics Manager Solution Templates",
          "App Events Webhooks",
          "Atlas",
          "BillingCenter",
          "BinRepo",
          "Businessowners Standards Based Template",
          "Canvas",
          "Checksums",
          "ClaimCenter",
          "Cloud Platform",
          "Commercial Auto Standards Based Template",
          "Community Case Templates",
          "Compare",
          "Configuration Manager",
          "Crime Standards Based Template",
          "Cyence",
          "Data Platform",
          "DataHub",
          "DevConnect",
          "Digital Code Generation Extension Pack",
          "Digital Reference Applications",
          "DocTools",
          "EasyGuide",
          "Explore",
          "Global Content",
          "General Liability Standards Based Template",
          "Guidewire AppReader",
          "Guidewire Cloud Home",
          "Cloud Standards",
          "Guidewire for Salesforce",
          "HazardHub Casualty",
          "Helios",
          "InfoCenter",
          "InsuranceNow",
          "InsuranceNow Consumer Service Portal",
          "InsuranceSuite Configuration Upgrade Tools",
          "Internal Docs",
          "Jutro Design System",
          "Jutro Digital Platform",
          "Keti",
          "Lifecycle Manager",
          "Lines of Business",
          "LRS",
          "Nebula",
          "PolicyCenter",
          "Portfolio Assembly",
          "Predict",
          "Product Adoption",
          "Rules",
          "String Manager",
          "Submission Intake",
          "Underwriting Management",
          "Underwriting Workbench",
          "Workers Compensation Standards Based Template",
          "Workflow Service",
          "Workset Manager"
        ]
      }
    },
    "doc": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "title",
        "id",
        "url",
        "metadata",
        "environments",
        "internal",
        "earlyAccess",
        "public",
        "displayOnLandingPages",
        "indexForSearch"
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/id"
        },
        "title": {
          "$ref": "#/definitions/title"
        },
        "displayTitle": {
          "$ref": "#/definitions/displayTitle"
        },
        "body": {
          "$ref": "#/definitions/body"
        },
        "url": {
          "description": "The url of the resource we're linking to. Can be relative to the root, or an absolute URL that starts with https://",
          "type": "string"
        },
        "displayOnLandingPages": {
          "description": "If set to false, do not display link on landing page. Defaults to true if not set.",
          "type": "boolean"
        },
        "indexForSearch": {
          "description": "If set to false, do not add the document to the search index. Defaults to true if not set.",
          "type": "boolean"
        },
        "public": {
          "description": "If set to true, users do not have to authenticate to view the document. Defaults to false if not set.",
          "type": "boolean"
        },
        "internal": {
          "description": "If set to true, the document is available to Guidewire employees only.",
          "type": "boolean"
        },
        "earlyAccess": {
          "description": "If set to true, the document is marked with the Early Access disclaimer.",
          "type": "boolean"
        },
        "metadata": {
          "$ref": "#/definitions/metadata"
        },
        "environments": {
          "$ref": "#/definitions/environments"
        }
      }
    },
    "build": {
      "type": "object",
      "additionalProperties": false,
      "required": ["buildType", "docId", "srcId"],
      "properties": {
        "buildType": {
          "description": "The build type to apply",
          "type": "string",
          "enum": ["dita", "source-zip", "storybook", "yarn", "just-copy"]
        },
        "filter": {
          "description": "The name of the ditaval file from the common-gw/ditavals submodule to use in the build, including the extension",
          "type": "string",
          "examples": [
            "operator.ditaval",
            "IS-BC-Cloud-Draft.ditaval",
            "audience.xml"
          ]
        },
        "root": {
          "description": "The filename of the ditamap to use, including the extension",
          "examples": ["_superbook.ditamap", "flowers.ditamap", "webhelp.xml"]
        },
        "workingDir": {
          "description": "The working folder where the build commands are executed",
          "examples": ["website", "frontend"]
        },
        "indexRedirect": {
          "description": "If set to true, add a script to the landing page that redirects the user to the first topic in the table of contents. Defaults to false if not set.",
          "type": "boolean"
        },
        "srcId": {
          "$ref": "#/definitions/id"
        },
        "docId": {
          "$ref": "#/definitions/id"
        },
        "resources": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/resource"
          }
        },
        "nodeImageVersion": {
          "description": "The version of Node.js to use. Works only in yarn builds"
        },
        "yarnBuildCustomCommand": {
          "description": "The default build command for yarn is 'yarn build'. The value of this attribute replaces the word build with whatever you set here."
        },
        "outputPath": {
          "description": "The path where the output is stored, relative to workingDir. By default, the build looks for 'out', 'dist', or 'build'. If your output folder is different, specify it using this prop."
        },
        "zipFilename": {
          "description": "The name of the output .zip file (do not include .zip, that's added automatically). Only makes sense for the source-zip build. Default is 'result'."
        },
        "disabled": {
          "description": "If set to true, the build is disabled. Defaults to false if not set.",
          "type": "boolean"
        },
        "customEnv": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
